<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crime Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: white;
            margin: 0;
            padding: 0;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 300px;
            background-color: #2A2A2A;
            padding: 20px;
            box-sizing: border-box;
        }

        .sidebar h2, .sidebar h1, .sidebar label {
            color: #1E90FF;
        }

        .sidebar form {
            margin-top: 20px;
        }

        .sidebar .form-group {
            margin-bottom: 20px;
        }

        .sidebar .form-control {
            background-color: #121212;
            color: white;
            border: 1px solid #444;
            width: 100%;
        }

        .sidebar .btn-primary {
            background-color: #1E90FF;
            border: none;
            width: 100%;
        }

        .main-content {
            flex: 1;
            padding: 20px;
            box-sizing: border-box;
        }

        .header h1 {
            color: #1E90FF;
        }

        .content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .chart {
            background-color: #1E1E1E;
            padding: 20px;
            border-radius: 8px;
            box-sizing: border-box;
            width: calc(50% - 10px);
            height: 300px;
        }

        .pie-charts {
            display: flex;
            gap: 20px;
            width: 100%;
            flex-wrap: wrap;
        }

        .pie-chart {
            background-color: #1E1E1E;
            padding: 20px;
            border-radius: 8px;
            box-sizing: border-box;
            width: calc(50% - 10px);
            height: 300px;
        }

        .live-data {
            background-color: #1E1E1E;
            padding: 20px;
            border-radius: 8px;
            box-sizing: border-box;
            width: 100%;
            height: 400px;
            margin-bottom: 20px;
        }

        .statistics {
            background-color: #1E1E1E;
            padding: 20px;
            border-radius: 8px;
            box-sizing: border-box;
            width: 100%;
            margin-bottom: 20px;
        }

        .statistics h3 {
            color: #1E90FF;
            margin: 10px 0;
        }

        .statistics p {
            color: #1E90FF;
        }

        .forecast-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            margin-bottom: 20px;
        }

        .forecast {
            background-color: #1E1E1E;
            padding: 20px;
            border-radius: 8px;
            box-sizing: border-box;
            width: 100%;
            text-align: center;
        }

        .forecast h2 {
            color: #1E90FF;
        }

        .forecast img {
            max-width: 100%;
            height: auto;
        }

        .forecast ul {
            list-style: none;
            padding: 0;
        }

        .forecast ul li {
            margin: 5px 0;
        }

        canvas {
            height: 100% !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h2>Dashboard</h2>
            <h1>Future Crime Pattern Prediction</h1>
            <form method="post">
                <div class="form-group">
                    <label for="future_steps">Enter number of months to forecast:</label>
                    <input type="number" id="future_steps" name="future_steps" class="form-control" min="1" value="{{ future_steps }}">
                </div>
                <div class="form-group">
                    <label for="start_date">Enter start date for the forecast:</label>
                    <input type="date" id="start_date" name="start_date" class="form-control">
                </div>
                <button type="submit" class="btn btn-primary">Forecast</button>
            </form>
            <div class="forecasted-values">
                <h2>Forecasted Values</h2>
                {% if forecast_results %}
                    <ul>
                        {% for value in forecast_results %}
                            <li>{{ value }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
        <div class="main-content">
            <div class="header">
                <h1>Analysis</h1>
            </div>
            <div class="content">
                <div class="chart">
                    
                    <canvas id="barChart"></canvas>
                </div>
                <div class="chart">
                    
                    <canvas id="crimeRateChart"></canvas>
                </div>
                <div class="forecast-container">
                    <div class="forecast">
                        <h2>Forecast Plot</h2>
                        {% if forecast_plot %}
                            <img src="data:image/png;base64,{{ forecast_plot }}" alt="Forecast Plot" class="img-fluid">
                        {% endif %}
                    </div>
                </div>
                <div class="chart">
                   
                    <canvas id="waterfallChart"></canvas>
                </div>
                <div class="chart">
                    
                    <canvas id="myBubbleChart"></canvas>
                </div>
                <div class="live-data">
                    
                    <canvas id="polarChart"></canvas>
                </div>
                <div class="statistics">
                    <h3>Crime Data</h3>
                    <p>As State Capital Bengaluru often faces Cyber Crime due to its thriving IT sector. It also witnesses a significant number of thefts, robberies, and cases of violence, partly attributed to its large population and diverse demographics</p>
                    <p>Shivamogga faces challenges related to both urban and rural crimes. The district has witnessed instances of organized crime, including illegal mining activities, which have been a subject of concern. Additionally, crimes like theft, burglary, and occasional instances of communal tension are reported</p>
                    <p>Drug Trafficking and Distribution in Karnataka, particularly urban centers like Bengaluru, serves as a transit point for drug trafficking due to its strategic location and connectivity. The state's well-developed transportation network facilitates the movement of illicit substances, including heroin, cocaine, MDMA (ecstasy), and synthetic drugs</p>
                    <p>Mandya, primarily an agricultural region, contends with issues such as property disputes, theft of agricultural produce, and occasional incidents of farmer distress leading to protests and unrest. The district's agrarian economy and socio-political dynamics influence the nature and frequency of reported crimes.</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Bar Chart
            const barCtx = document.getElementById('barChart').getContext('2d');
            new Chart(barCtx, {
                type: 'bar',
                data: {
                    labels: ['Bengaluru City', 'Bengaluru Dist', 'Tumakuru', 'Mandya', 'Ramanagara', 'Hassan', 'Shivamogga', 'Mysuru Dist', 'Belgavi Dist', 'Chitradurga'],
                    datasets: [{
                        label: 'Top 10 pending cases - City wise',
                        data: [105647, 25563, 21364, 20700, 19677, 19062, 17608, 16932, 16595, 15734],
                        backgroundColor: [
                            '#00BFFF', '#7CFC00', '#FF69B4', '#FF4500', '#FFD700', '#ADFF2F', '#00FFFF', '#BA55D3', '#32CD32', '#FF6347'
                        ],
                        borderColor: [
                            '#00BFFF', '#7CFC00', '#FF69B4', '#FF4500', '#FFD700', '#ADFF2F', '#00FFFF', '#BA55D3', '#32CD32', '#FF6347'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Crime Rate Chart (Pie Chart)
            const crimeRateCtx = document.getElementById('crimeRateChart').getContext('2d');
            new Chart(crimeRateCtx, {
                type: 'pie',
                data: {
                    labels: ['Bengaluru City', 'Bengaluru District', 'Tumakuru', 'Shivamogga', 'Mandya'],
                    datasets: [{
                        label: 'Crime Rate',
                        data: [4305754, 65032, 62520, 620427,60297],
                        backgroundColor: [
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(153, 102, 255, 0.8)',
                            'rgba(255, 159, 64, 0.8)',
                            'rgba(255, 206, 86, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                        ],
                        borderColor: [
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 99, 132, 1)'
                        ],
                        borderWidth: 1
                    }]
                }
            });

            // Bubble Chart - Crime Rate Comparison
            const bubbleCtx = document.getElementById('myBubbleChart').getContext('2d');
            new Chart(bubbleCtx, {
                type: 'bubble',
                data: {
                    datasets: [{
                        label: 'Crime Rate Comparison',
                        data: [
                            { x: 5, y: 488630, r: 25, label: 'Bengaluru City' },
                            { x: 6, y: 142096, r: 19, label: 'Belgavi Dist' },
                            { x: 1, y: 121771, r: 17, label: 'Mandya' },
                            { x: 7, y: 121581, r: 15, label: 'Shivamogga' },
                            { x: 3, y: 111045, r: 13, label: 'Tumakkuru' },
                            { x: 2, y: 105961, r: 11, label: 'Mysuru Dist'},
                            { x: 4, y: 100683, r: 9, label: 'Hassan' }
                        ],
                        backgroundColor: 'rgba(153, 102, 255, 0.2)',
                        borderColor: 'rgba(153, 102, 255, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'District Index'
                            },
                            ticks: {
                                stepSize: 1,
                                callback: function(value, index, values) {
                                    const labels = ['Mandya', 'Mysuru Dist', 'Tumakkuru', 'Hassan', 'Bengaluru City', 'Belgavi Dist','Shivamogga'];
                                    return labels[value - 1];
                                }
                            }
                        },
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Crime Rate'
                            }
                        }   
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.raw.label || '';
                                    return label + ': (' + context.raw.x + ', ' + context.raw.y + ')';
                                }
                            }
                        }
                    }
                }   
            });

            // Bubble Chart - Most Crime Committed Person
            const waterfallCtx = document.getElementById('waterfallChart').getContext('2d');
            new Chart(waterfallCtx, {
                type: 'bubble',
                data: {
                    datasets: [{
                        label: 'Most Crime Committed Person',
                        data: [
                            { x: 1, y: 19801, r: 25, label: 'Manjunatha' },
                            { x: 3, y: 10722, r: 21, label: 'Ravi' },
                            { x: 4, y: 4701 , r: 19, label: 'Ramesh' },
                            { x: 5, y: 4687, r: 17, label: 'Nagaraju' },
                            { x: 6, y: 4528, r: 15, label: 'Nagaraja' },
                            {x: 2, y: 34268, r: 28, label: 'Others' }
                        ],
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Person Index'
                            },
                            ticks: {
                                stepSize: 1,
                                callback: function(value, index, values) {
                                    const labels = ['Manjunatha', 'Others', 'Ravi', 'Ramesh', 'Nagaraju','Nagaraja'];
                                    return labels[value - 1];
                                }
                            }
                        },
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Crime Count'
                            }
                        }   
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.raw.label || '';
                                    return label + ': (' + context.raw.x + ', ' + context.raw.y + ')';
                                }
                            }
                        }
                    }
                }   
            });

            // Polar Chart
            const polarCtx = document.getElementById('polarChart').getContext('2d');
            new Chart(polarCtx, {
                type: 'polarArea',
                data: {
                    datasets: [{
                        label: 'Top 10 crime head names',
                        data: [133881,116152,106826,84259,80359,79447,78501,77822,60577,52619],
                        backgroundColor: [
                            '#00BFFF', '#7CFC00', '#FF69B4', '#FF4500', '#FFD700', '#ADFF2F', '#00FFFF', '#BA55D3', '#32CD32', '#FF6347'
                        ],
                        borderColor: [
                            '#00BFFF', '#7CFC00', '#FF69B4', '#FF4500', '#FFD700', '#ADFF2F', '#00FFFF', '#BA55D3', '#32CD32', '#FF6347'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
